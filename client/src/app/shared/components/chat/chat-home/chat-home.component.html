<!-- Chat box title tray -->
<div class="chatbox chatbox--tray chatbox--empty">
  <div class="chatbox__title">
    <h5><a>{{selectedUserName}}</a></h5>
    <button class="btn btn-outline-success btn-lg callimg mr-6" data-toggle="popover" (click)="showAudio()" title="Audio Call">
      <i class="fa fa-phone" aria-hidden="true"></i>
    </button>
    <button class="btn btn-outline-primary btn-lg callimg mr-6" data-toggle="popover" (click)="showVideo()" title="Video Call">
      <i class="fa fa-video-camera" aria-hidden="true"></i>
    </button>
    <button class="chatbox__title__tray" (click)="chatBoxToggle()">
      <span></span>
    </button>
    <button class="chatbox__title__close">
      <span>
             <svg viewBox="0 0 12 12" width="12px" height="12px">
                 <line stroke="#FFFFFF
" x1="11.75" y1="0.25" x2="0.25" y2="11.75"></line>
                 <line stroke="#FFFFFF
" x1="11.75" y1="11.75" x2="0.25" y2="0.25"></line>
             </svg>
         </span>
    </button>
  </div>
  <!-- Messages to be displayed in chatbox -->
  <ul class="message-thread">
   <li class="" *ngFor="let message of messages" [class.align-right]="alignMessage(message.toUserId)" [class.msgcolour]="!alignMessage(message.toUserId)">
     {{ message.message}}
   </li>
 </ul>

  <div class="row">
    <div class="col-sm-10">
  <div class="message-typer">
    <textarea class="message form-control" placeholder="Type and hit Enter" [(ngModel)]="message" (keyup)="sendMessage($event)">
     <div class="card-footer">
        <input type="file" id="file" class=" form-control" (change)="fileChange($event)" accept=".jpg,.jpeg,.png">
        <div class="col-sm-3">
          <button type="button" class="btn btn-secondary upload" (click)="uploadFile()">Upload</button>
        </div>
      </div>
    </textarea>
  </div>
   </div>
   
   <a *ngIf="showSearchButton==true" class="btn" name="btnActivateSpeechSearchMovie" id="btnActivateSpeechSearchMovie" (click)="activateSpeechSearchMovie()"> <i class="fa fa-microphone" aria-hidden="true"></i></a>
  <a *ngIf="showStopButton==true" class="btn" (click)="Stop()">  <i class="fa fa-microphone-slash" aria-hidden="true"></i> </a>
  </div>

<!-- <div class="form-group justify-content-center">
               <input type="text" class="form-control border-input mt-4" name="txtSpeechSearchMovieName" id="txtSpeechSearchMovieName" value="" placeholder="Click below button and then say something!!!" [(ngModel)]="speechData">
               <a *ngIf="showSearchButton==true" class="mt-1 px-5 padd btn btn-info" name="btnActivateSpeechSearchMovie" id="btnActivateSpeechSearchMovie" (click)="activateSpeechSearchMovie()"> <i class="fa fa-microphone" aria-hidden="true"></i></a>
               <a *ngIf="showStopButton==true" class="mt-1 px-5 padd btn btn-warning" (click)="Stop()">  <i class="fa fa-microphone-slash" aria-hidden="true"></i> </a>
             </div> -->

  </div>

<!-- Togglable button -->
<span class="done">
 <button mat-fab class="button-collapse sidebar" (click)="removesb()">
   <mat-icon>chat
   </mat-icon>
 </button>
</span>
<!-- Side-bar displaying list of online users -->
<div class="nav-side-menu side">
  <div class="brand">Online Users</div>
  <div class="menu-list">
    <ul class="n">
      <li *ngFor="let user of chatListUsers">
        {{ user.userName}}
        <button class="btn btn-outline-primary btn-lg callimg mr-6 close" data-toggle="popover" title="Chat" (click)="selectedUser(user)" [class.selected-user]="isUserSelected(user._id)">Chat
          <i class="fa fa-envelope" aria-hidden="true"></i>
        </button>
      </li>
    </ul>
  </div>
</div>
<span class="done">
     <button mat-fab class="button-collapse sidebar" (click)="removesb()">
    <mat-icon>chat</mat-icon>
  </button>
     
   </span>
<div class="nav-side-menu side">
  <div class="brand">{{config.chat.TITLE}}</div>
  <div class="menu-list">
    <ul class="n">
      <li *ngFor="let user of chatListUsers">
        {{ user.userName}}
        <button class="btn btn-outline-primary btn-lg callimg mr-6 close" data-toggle="popover" title="Chat" (click)="selectedUser(user)" [class.selected-user]="isUserSelected(user._id)">Chat
          <i class="fa fa-envelope" aria-hidden="true"></i>
        </button>
      </li>
    </ul>
  </div>
</div>
<!-- use template for audio call componen -->
<div *ngIf="showAudioBox==true">
  <app-audio-chat [userPeerId]="peerId" [callUserName]="userName" [selectedUserName]="selectedUserName"></app-audio-chat>
</div>
<!--use template for video call component -->
<div *ngIf="showVideoBox==true">
  <app-video-chat [userPeerId]="peerIdVideo" [callUserName]="userNameForVideo" [selectedUserName]="selectedUserName"></app-video-chat>
</div>
